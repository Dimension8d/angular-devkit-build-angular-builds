"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const utils_1 = require("../models/webpack-configs/utils");
function generateEntryPoints(appConfig) {
    // Add all styles/scripts, except lazy-loaded ones.
    const extraEntryPoints = (extraEntryPoints, defaultBundleName) => {
        const entryPoints = utils_1.normalizeExtraEntryPoints(extraEntryPoints, defaultBundleName)
            .filter(entry => !entry.lazy)
            .map(entry => entry.bundleName);
        // remove duplicates
        return [...new Set(entryPoints)];
    };
    const entryPoints = [
        'es2015-polyfills',
        'polyfills',
        'sw-register',
        ...extraEntryPoints(appConfig.styles, 'styles'),
        ...extraEntryPoints(appConfig.scripts, 'scripts'),
        'main',
    ];
    const duplicates = [...new Set(entryPoints.filter(x => entryPoints.indexOf(x) !== entryPoints.lastIndexOf(x)))];
    if (duplicates.length > 0) {
        throw new Error(`Multiple bundles have been named the same: '${duplicates.join(`', '`)}'.`);
    }
    return entryPoints;
}
exports.generateEntryPoints = generateEntryPoints;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFja2FnZS1jaHVuay1zb3J0LmpzIiwic291cmNlUm9vdCI6Ii4vIiwic291cmNlcyI6WyJwYWNrYWdlcy9hbmd1bGFyX2RldmtpdC9idWlsZF9hbmd1bGFyL3NyYy9hbmd1bGFyLWNsaS1maWxlcy91dGlsaXRpZXMvcGFja2FnZS1jaHVuay1zb3J0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBUUEsMkRBQTRFO0FBRTVFLFNBQWdCLG1CQUFtQixDQUNqQyxTQUFvRTtJQUdwRSxtREFBbUQ7SUFDbkQsTUFBTSxnQkFBZ0IsR0FBRyxDQUN2QixnQkFBbUMsRUFDbkMsaUJBQXlCLEVBQ2YsRUFBRTtRQUNaLE1BQU0sV0FBVyxHQUFHLGlDQUF5QixDQUFDLGdCQUFnQixFQUFFLGlCQUFpQixDQUFDO2FBQy9FLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQzthQUM1QixHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7UUFFbEMsb0JBQW9CO1FBQ3BCLE9BQU8sQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7SUFDbkMsQ0FBQyxDQUFDO0lBRUYsTUFBTSxXQUFXLEdBQUc7UUFDbEIsa0JBQWtCO1FBQ2xCLFdBQVc7UUFDWCxhQUFhO1FBQ2IsR0FBRyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQztRQUMvQyxHQUFHLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxPQUFPLEVBQUUsU0FBUyxDQUFDO1FBQ2pELE1BQU07S0FDUCxDQUFDO0lBRUYsTUFBTSxVQUFVLEdBQUcsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUM1QixXQUFXLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxXQUFXLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQy9FLENBQUMsQ0FBQztJQUVILElBQUksVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7UUFDekIsTUFBTSxJQUFJLEtBQUssQ0FBQywrQ0FBK0MsVUFBVSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDN0Y7SUFFRCxPQUFPLFdBQVcsQ0FBQztBQUNyQixDQUFDO0FBbkNELGtEQW1DQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmltcG9ydCB7IEV4dHJhRW50cnlQb2ludCB9IGZyb20gJy4uLy4uL2Jyb3dzZXIvc2NoZW1hJztcbmltcG9ydCB7IG5vcm1hbGl6ZUV4dHJhRW50cnlQb2ludHMgfSBmcm9tICcuLi9tb2RlbHMvd2VicGFjay1jb25maWdzL3V0aWxzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlRW50cnlQb2ludHMoXG4gIGFwcENvbmZpZzogeyBzdHlsZXM6IEV4dHJhRW50cnlQb2ludFtdLCBzY3JpcHRzOiBFeHRyYUVudHJ5UG9pbnRbXSB9LFxuKSB7XG5cbiAgLy8gQWRkIGFsbCBzdHlsZXMvc2NyaXB0cywgZXhjZXB0IGxhenktbG9hZGVkIG9uZXMuXG4gIGNvbnN0IGV4dHJhRW50cnlQb2ludHMgPSAoXG4gICAgZXh0cmFFbnRyeVBvaW50czogRXh0cmFFbnRyeVBvaW50W10sXG4gICAgZGVmYXVsdEJ1bmRsZU5hbWU6IHN0cmluZyxcbiAgKTogc3RyaW5nW10gPT4ge1xuICAgIGNvbnN0IGVudHJ5UG9pbnRzID0gbm9ybWFsaXplRXh0cmFFbnRyeVBvaW50cyhleHRyYUVudHJ5UG9pbnRzLCBkZWZhdWx0QnVuZGxlTmFtZSlcbiAgICAgIC5maWx0ZXIoZW50cnkgPT4gIWVudHJ5LmxhenkpXG4gICAgICAubWFwKGVudHJ5ID0+IGVudHJ5LmJ1bmRsZU5hbWUpO1xuXG4gICAgLy8gcmVtb3ZlIGR1cGxpY2F0ZXNcbiAgICByZXR1cm4gWy4uLm5ldyBTZXQoZW50cnlQb2ludHMpXTtcbiAgfTtcblxuICBjb25zdCBlbnRyeVBvaW50cyA9IFtcbiAgICAnZXMyMDE1LXBvbHlmaWxscycsXG4gICAgJ3BvbHlmaWxscycsXG4gICAgJ3N3LXJlZ2lzdGVyJyxcbiAgICAuLi5leHRyYUVudHJ5UG9pbnRzKGFwcENvbmZpZy5zdHlsZXMsICdzdHlsZXMnKSxcbiAgICAuLi5leHRyYUVudHJ5UG9pbnRzKGFwcENvbmZpZy5zY3JpcHRzLCAnc2NyaXB0cycpLFxuICAgICdtYWluJyxcbiAgXTtcblxuICBjb25zdCBkdXBsaWNhdGVzID0gWy4uLm5ldyBTZXQoXG4gICAgZW50cnlQb2ludHMuZmlsdGVyKHggPT4gZW50cnlQb2ludHMuaW5kZXhPZih4KSAhPT0gZW50cnlQb2ludHMubGFzdEluZGV4T2YoeCkpLFxuICApXTtcblxuICBpZiAoZHVwbGljYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBNdWx0aXBsZSBidW5kbGVzIGhhdmUgYmVlbiBuYW1lZCB0aGUgc2FtZTogJyR7ZHVwbGljYXRlcy5qb2luKGAnLCAnYCl9Jy5gKTtcbiAgfVxuXG4gIHJldHVybiBlbnRyeVBvaW50cztcbn1cbiJdfQ==